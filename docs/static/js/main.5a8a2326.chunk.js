(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{50:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n(31),a=n.n(c),s=(n(50),n(22)),i=n(12),o=n(14),u=n(0),l=n.n(u),j=n(4),b=n(23),d=n(43),O=Object(d.a)({apiKey:"AIzaSyCyFTsrW2dOv7Ax7IYwTguiR8y1F0tuQpE",authDomain:"gif-app-89297.firebaseapp.com",projectId:"gif-app-89297",storageBucket:"gif-app-89297.appspot.com",messagingSenderId:"677803113629",appId:"1:677803113629:web:ecc183262f383a76dfa874"}),f=Object(b.f)(O),p=n(16),h=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,Object(b.e)(Object(b.b)(f,"".concat(t)));case 3:return e.sent.forEach((function(e){n=[].concat(Object(p.a)(n),[Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})])})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.a)(Object(b.b)(f,"".concat(n)),t);case 3:return r=e.sent,c=r.id,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),m=n(13),x="[auth] login",v="[auth] logout",y="[loading] open",w="[loading] close",I="[gifs] load gifs",N="[gifs] add new",_="[gifs] remove gifs",S="[gifs] clean gifs after to logout",k=function(e){return{type:N,payload:e}},C=function(e){return{type:I,payload:e}},E=n(3),L=function(e){var t=e.title,n=e.id,c=e.url,a=e.isFavorite,s=e.setAlertLogin,i=Object(r.useRef)(null),u=Object(m.b)(),d=Object(m.c)((function(e){return e.auth})),O=d.uid,p=d.isLoggedIn,h=Object(m.c)((function(e){return e.favorite})),x=function(){var e=Object(j.a)(l.a.mark((function e(){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=10;break}return r={title:t,url:c,id:n,isFavorite:!0},e.next=4,g(r,O);case 4:a=e.sent,u(k(Object(o.a)(Object(o.a)({},r),{},{id:a}))),i.current.style.backgroundColor="#22B244",i.current.style.color="#fff",e.next=11;break;case 10:s(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsxs)("div",{className:"card",children:[Object(E.jsx)("img",{src:c,alt:t,className:"gif"}),Object(E.jsx)("p",{children:t}),a?Object(E.jsxs)("button",{onClick:function(){u(function(e){return{type:_,payload:e}}(n)),h.forEach((function(e){e.id===n&&Object(b.c)(Object(b.d)(f,"".concat(O,"/").concat(n))).then((function(){})).catch((function(e){return console.log(e)}))}))},ref:i,children:[Object(E.jsx)("img",{src:"./pictures/star_black_24dp.svg",alt:"star-img",id:"star-img"}),"REMOVE FROM FAVORITES"]}):Object(E.jsxs)("button",{onClick:x,ref:i,children:[Object(E.jsx)("img",{src:"./pictures/star_black_24dp.svg",alt:"star-img",id:"star-img"}),"ADD TO FAVORITES"]})]})},F=function(){var e=Object(m.c)((function(e){return e.auth})).isLoggedIn,t=Object(m.c)((function(e){return e.favorite}));return Object(E.jsx)("section",{children:e?Object(E.jsx)("article",{className:"gif-card-container favorites",children:t.length>0?t.map((function(e){return Object(r.createElement)(L,Object(o.a)(Object(o.a)({},e),{},{key:e.id}))})):Object(E.jsx)(E.Fragment,{children:"YOU HAVE NOT GIFS SAVED"})}):Object(E.jsx)("article",{className:"favorite-screen-denied",children:"LOG IN TO SAVE YOUR FAVORITES GIFS"})})},A=n(10),R=function(e){var t=e.setCategories,n=Object(r.useState)(""),c=Object(A.a)(n,2),a=c[0],s=c[1];return Object(E.jsx)("section",{className:"search-gif",children:Object(E.jsxs)("form",{onSubmit:function(e){a.trim().length>2?(t((function(e){return[a].concat(Object(p.a)(e))})),s("")):alert("Please enter a value"),e.preventDefault()},children:[Object(E.jsx)("label",{children:"Search"}),Object(E.jsx)("input",{type:"text",value:a,onChange:function(e){s(e.target.value)},placeholder:"New Category"}),Object(E.jsx)("input",{type:"submit",value:"Add"})]})})},T=function(e){var t=e.text;return Object(E.jsx)("button",{className:"auth-buttons",children:t})},P=function(e){var t=e.setAlertLogin;return Object(E.jsx)("section",{className:"alert-login-container",onClick:function(){return t()},children:Object(E.jsxs)("article",{className:"modal",children:["LOGIN",Object(E.jsx)(s.b,{to:"/auth",children:Object(E.jsx)(T,{text:"LOG IN"})}),Object(E.jsx)("img",{src:"./pictures/close_black_24dp.svg",alt:"close-button"})]})})},D=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r,c,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.giphy.com/v1/gifs/search?q=".concat(encodeURI(t),"&lImit=20&api_key=1ywURhrBl5cdf1Eqb0nCB2PLVy7Yme9o"),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,a=c.data,s=a.map((function(e){return{id:e.id,title:e.title,url:e.images.downsized_medium.url}})),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){var t=e.category,n=e.setAlertLogin,c=function(e){var t=Object(r.useState)({data:[],loading:!0}),n=Object(A.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){D(e).then((function(e){a({data:e,loading:!1})}))}),[e]),c}(t).data;return Object(E.jsxs)("section",{children:[Object(E.jsx)("article",{className:"gif-title",children:Object(E.jsxs)("h3",{children:[" ",t," "]})}),Object(E.jsx)("article",{className:"gif-card-container",children:c.map((function(e){return Object(E.jsx)(L,Object(o.a)(Object(o.a)({},e),{},{isFavorite:!1,setAlertLogin:n}),e.id)}))})]})};var V=function(){var e=Object(r.useState)([]),t=Object(A.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),s=Object(A.a)(a,2),i=s[0],o=s[1];return Object(E.jsxs)(E.Fragment,{children:[i&&Object(E.jsx)(P,{setAlertLogin:o}),Object(E.jsx)(R,{setCategories:c}),n.map((function(e){return Object(E.jsx)(J,{category:e,setAlertLogin:o},e)}))]})},G=function(){return{type:y}},B=function(){return{type:w}},U=n(38),Y=n.n(U),q=function(e){return{type:x,payload:e}},M=function(){var e=Object(m.c)((function(e){return e.auth})).isLoggedIn,t=Object(m.b)();return Object(E.jsx)("header",{children:Object(E.jsxs)("nav",{children:[Object(E.jsxs)("ul",{children:[Object(E.jsxs)("li",{children:[Object(E.jsx)("img",{src:"./pictures/search_black_24dp.svg",alt:"search-img"}),Object(E.jsx)(s.b,{to:"/",children:"Home"})]}),Object(E.jsxs)("li",{children:[Object(E.jsx)("img",{src:"./pictures/star_black_24dp.svg",alt:"star-img"}),Object(E.jsx)(s.b,{to:"/favorites",children:"Favorites"})]})]}),Object(E.jsx)("ul",{children:e?Object(E.jsx)("li",{className:"auth-buttons",onClick:function(){t({type:S}),t({type:v}),localStorage.removeItem("token")},children:"Log out"}):Object(E.jsx)(s.b,{to:"/auth",children:Object(E.jsx)("li",{className:"auth-buttons",children:"Log In"})})})]})})},z=function(){var e=Object(m.c)((function(e){return e.auth})).uid,t=Object(m.b)();return Object(r.useEffect)((function(){e&&t(function(e){return function(){var t=Object(j.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:r=t.sent,n(C(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}),[t,e]),Object(E.jsxs)("div",{className:"container",children:[Object(E.jsx)(M,{}),Object(E.jsxs)(i.d,{children:[Object(E.jsx)(i.b,{exact:!0,path:"/",element:Object(E.jsx)(V,{})}),Object(E.jsx)(i.b,{path:"/favorites",element:Object(E.jsx)(F,{})}),Object(E.jsx)(i.b,{path:"*",element:Object(E.jsx)("h4",{children:"not found"})})]})]})},H=n.p+"static/media/undraw_welcome_cats_thqn.b6a961e7.svg",X=n(9),K=function(e){var t=e.values,n=e.handleInputChange,r=t.email,c=t.password;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{children:"Email"}),Object(E.jsx)("input",{type:"email",autoComplete:"off",name:"email",value:r,onChange:n})]}),Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{children:"Password"}),Object(E.jsx)("input",{type:"password",autoComplete:"off",name:"password",value:c,onChange:n})]})]})},Q=function(e){var t=e.values,n=e.handleInputChange,r=t.name,c=t.email,a=t.password,s=t.confirmPassowrd;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{children:"Name"}),Object(E.jsx)("input",{type:"text",autoComplete:"off",name:"name",value:r,onChange:n})]}),Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{children:"Email"}),Object(E.jsx)("input",{type:"email",autoComplete:"off",name:"email",value:c,onChange:n})]}),Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{children:"Password"}),Object(E.jsx)("input",{type:"password",autoComplete:"off",name:"password",value:a,onChange:n})]}),Object(E.jsxs)("div",{className:"form-group",children:[Object(E.jsx)("label",{children:"Confirm"}),Object(E.jsx)("input",{type:"password",autoComplete:"off",name:"confirmPassowrd",value:s,onChange:n})]})]})},W=function(){var e=Object(r.useState)("login"),t=Object(A.a)(e,2),n=t[0],c=t[1],a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(A.a)(t,2),c=n[0],a=n[1];return[c,function(e){var t=e.target;a(Object(o.a)(Object(o.a)({},c),{},Object(X.a)({},t.name,t.value)))},function(){a(e)}]}({name:"",email:"",password:"",confirmPassowrd:""}),s=Object(A.a)(a,3),i=s[0],u=s[1],b=s[2],d=Object(m.b)();return Object(E.jsxs)("form",{children:[Object(E.jsx)("h3",{children:"login"===n?"LOGIN":"REGISTER"}),"login"===n?Object(E.jsx)(K,{values:i,handleInputChange:u}):Object(E.jsx)(Q,{values:i,handleInputChange:u}),Object(E.jsx)("input",{type:"submit",onClick:function(e){var t,r;e.preventDefault(),"login"===n?(d(G()),d((t=i.email,r=i.password,function(){var e=Object(j.a)(l.a.mark((function e(n){var c,a,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})});case 2:return c=e.sent,e.next=5,c.json();case 5:if(a=e.sent,s=a.jwt,i=a.user,!(o=a.msg)){e.next=13;break}return Y.a.fire({title:"Error",icon:"error",text:o}),n(B()),e.abrupt("return");case 13:localStorage.setItem("token",JSON.stringify(s)),n(q(i)),n(B());case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))):(d(G()),d(function(e,t,n){return function(){var r=Object(j.a)(l.a.mark((function r(c){var a,s,i,o,u;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("http://localhost:8080/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:n})});case 2:return a=r.sent,r.next=5,a.json();case 5:if(s=r.sent,i=s.jwt,o=s.user,!(u=s.errors)){r.next=13;break}return Y.a.fire({title:"Error",icon:"error",text:u[0].msg}),c(B()),r.abrupt("return");case 13:localStorage.setItem("token",JSON.stringify(i)),c(q(o)),c(B());case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(i.name,i.email,i.password)))},className:"submit_button"}),Object(E.jsx)("p",{children:"login"===n?"I haven't a account":"I have a account"}),Object(E.jsx)("span",{onClick:function(){c("login"===n?"register":"login"),b()},children:"login"===n?"Register":"Login"})]})},Z=function(){return Object(E.jsxs)("main",{children:[Object(E.jsx)("section",{className:"login_and_register",children:Object(E.jsxs)("article",{className:"login_and_register_container",children:[Object(E.jsx)("article",{className:"login_and_register_img_container",children:Object(E.jsx)("img",{src:H,alt:"welcome"})}),Object(E.jsx)("article",{className:"login_and_register_text_container",children:Object(E.jsx)("h2",{children:" Login or Register and starts to save gifs"})})]})}),Object(E.jsx)("section",{className:"forms",children:Object(E.jsx)(W,{})})]})},$=function(e){var t=e.children;return e.isLoggedIn?Object(E.jsx)(i.a,{to:"/"}):t};var ee=function(){var e=Object(m.c)((function(e){return e.loading})),t=Object(m.b)();Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("token"));if(e){var n=function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}(e).exp;Date.now()>=1e3*n?(t(B()),localStorage.removeItem("token")):t((function(e){var t=JSON.parse(localStorage.getItem("token"));fetch("http://localhost:8080/api/auth/validate",{headers:{"x-token":t}}).then((function(e){return e.json()})).then((function(t){e(q(t)),e(B())}))}))}else t(B())}),[t]);var n=Object(m.c)((function(e){return e.auth})).isLoggedIn;return e?Object(E.jsx)(E.Fragment,{children:"Loading"}):Object(E.jsx)(s.a,{children:Object(E.jsxs)(i.d,{children:[Object(E.jsx)(i.b,{exact:!0,path:"/*",element:Object(E.jsx)(z,{})}),Object(E.jsx)(i.b,{path:"/auth",element:Object(E.jsx)($,{isLoggedIn:n,children:Object(E.jsx)(Z,{})})})]})})},te=n(30),ne=n(45),re={name:null,email:null,uid:null,isLoggedIn:!1},ce=[],ae="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.c,se=Object(te.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(null===t||void 0===t?void 0:t.type){case x:return Object(o.a)(Object(o.a)(Object(o.a)({},e),t.payload),{},{isLoggedIn:!0});case v:return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!1});default:return e}},loading:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(null===t||void 0===t?void 0:t.type){case y:return!0;case w:return!1;default:return e}},favorite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return[].concat(Object(p.a)(e),[t.payload]);case I:return Object(p.a)(t.payload);case _:return e.filter((function(e){return e.id!==t.payload}));case S:return[];default:return e}}}),ie=Object(te.d)(se,ae(Object(te.a)(ne.a))),oe=function(){return Object(E.jsx)(m.a,{store:ie,children:Object(E.jsx)(ee,{})})};a.a.render(Object(E.jsx)(oe,{}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.5a8a2326.chunk.js.map